function initMap() {
  var projection = ol.proj.get('EPSG:900913');
  var projectionExtent = projection.getExtent();
  var size = ol.extent.getWidth(projectionExtent) / 256;
  var n = 26;
  var resolutions = new Array(n);
  var matrixIds = new Array(n);
  for (var z = 0; z < n; ++z) {
    // generate resolutions and matrixIds arrays for this WMTS
    resolutions[z] = size / Math.pow(2, z);
    matrixIds[z] = 'EPSG:900913:' + z;
  }

  var centers = [
    [-13733006.90, 6177383.50], // Victoria
    [-13703429.31, 6317388.11], // Vancouver
    [-12697846.96, 6630142.91], // Calgary 
    [-12634762.20, 7082259.73],  // Edmonton
    [-11875930.63, 6824263.78], // Saskatoon
    [-10813486.28, 6428871.88], // Winnipeg
    [-8838767.56, 5419133.25],   // Toronto
    [-8425983.76, 5688108.06],  // Ottawa
    [-8189407.58, 5700582.73],  // Montreal
    [-7421303.09, 5772340.30],  // Fredericton
    [-7081032.80, 5569718.49],  // Halifax
    [-5867338.66, 6035201.50]   // St, John's
    [ 3473167.79 , -3056995.45 ],// Lobamba
    [ 1385683.69 , 5146013.50 ],// Vatican City
    [ 682388.79 , 6379291.91 ],// Luxembourg
    [ 13472994.20 , 1648946.69 ],// Quezon City
    [ 13469657.70 , 1637443.96 ],// Pasay City
    [ 12703800.01 , 2578208.98 ],// Shenzhen
    [ 13141048.50 , 4411534.70 ],// Zibo
    [ -6253149.55 , -4144342.28 ],// Montevideo
    [ -10380957.98 , 5618676.41 ],// Minneapolis
    [ -13619041.44 , 6035935.37 ],// Seattle
    [ -12475791.02 , 3967458.44 ],// Phoenix
    [ -13044633.41 , 3871697.18 ],// San Diego
    [ -13627416.89 , 4546872.00 ],// San Francisco
    [ -13155951.86 , 4027717.68 ],// Los Angeles
    [ -11686983.80 , 4828395.56 ],// Denver
    [ -10045685.29 , 4669802.32 ],// St. Louis
    [ -10780397.98 , 3871697.18 ],// Dallas
    [ -10613414.55 , 3480679.82 ],// Houston
    [ -7977368.83 , 1201719.72 ],// Maracaibo
    [ -7911694.34 , 5210827.74 ],// Boston
    [ -9179468.29 , 3242537.03 ],// Tampa
    [ -8930723.25 , 2973039.88 ],// Miami
    [ -9395576.00 , 4006260.57 ],// Atlanta
    [ -9768508.04 , 5135837.50 ],// Chicago
    [ -8572865.87 , 4707571.41 ],// "Washington
    [ -8235634.42 , 4975819.22 ],// New York
    [ -8368102.28 , 4866221.15 ],// Philadelphia
    [ -7449387.11 , 1175785.96 ],// Caracas
    [ -6848044.55 , 1192665.25 ],// Port-of-Spain
    [ -9248646.11 , 5210827.74 ],// Detroit
    [ 135900.08 , 684128.78 ],// Lome
    [ 1133196.58 , 4411652.14 ],// Tunis
    [ 3396878.87 , 6522008.52 ],// Kiev
    [ 6052061.49 , 2810379.52 ],// Abu Dhabi
    [ 6153521.98 , 2904260.47 ],// Dubai
    [ 6499199.12 , 4572364.18 ],// Ashgabat
    [ 7713660.02 , 5058715.29 ],// Tashkent
    [ 11782953.06 , 2396085.02 ],// Hanoi
    [ 11877019.48 , 1207390.76 ],// Ho Chi Minh City
    [ 3148269.01 , -1737039.46 ],// Lusaka
    [ 3455664.63 , -2016004.60 ],// Harare
    [ 13979441.08 , -956390.73 ],// Dili
    [ 18736922.72 , -2006361.14 ],// Port-Vila
    [ -9709227.56 , 1586149.84 ],// Tegucigalpa
    [ -6475124.00 , 758977.14 ],// Georgetown
    [ -2443464.43 , 9387963.68 ],// Reykjavk
    [ -8052627.14 , 2101201.28 ],// Port-au-Prince
    [ -13210.02 , 6710566.11 ],// London
    [ 3229161.99 , 5028128.40 ],// Istanbul
    [ 3658230.73 , 4855656.88 ],// Ankara
    [ 3626942.37 , 35467.10 ],// Kampala
    [ 2124128.92 , 6024393.79 ],// Budapest
    [ 4920838.85 , 1730340.72 ],// Sanaa
    [ 3346106.47 , -217298.06 ],// Kigali
    [ -6141165.78 , 650678.30 ],// Paramaribo
    [ -410245.44 , 4924528.87 ],// Madrid
    [ 235408.46 , 1519049.83 ],// Niamey
    [ 242835.06 , 5069332.42 ],// Barcelona
    [ 2905216.15 , 5533057.59 ],// Bucharest
    [ 4137531.12 , 4332579.83 ],// Aleppo
    [ 4040680.44 , 3962124.52 ],// Damascus
    [ 683504.79 , 5814067.18 ],// Geneva
    [ 951566.16 , 6004639.72 ],// Zrich
    [ 2014369.47 , 8257013.83 ],// Stockholm
    [ 7655873.22 , 4658844.90 ],// Dushanbe
    [ 11189245.08 , 1545773.11 ],// Bangkok
    [ 3465746.94 , -3038352.65 ],// Mbabane
    [ -8577390.28 , -1350951.55 ],// Lima
    [ -6416839.61 , -2911955.61 ],// Asuncion
    [ -9603581.17 , 1363349.22 ],// Managua
    [ -1018218.47 , 4682309.11 ],// Lisbon
    [ -1945316.56 , 1656696.33 ],// Dakar
    [ -1473442.76 , 946549.44 ],// Freetown
    [ 3515472.36 , 538308.32 ],// Juba
    [ 3621471.65 , 1757293.49 ],// Khartoum
    [ 4365644.48 , 2453852.77 ],// Jeddah
    [ 475329.91 , 6814610.09 ],// The Hague
    [ 1196465.59 , 8381645.35 ],// Oslo
    [ 1615798.96 , 5789213.64 ],// Ljubljana
    [ 1905453.58 , 6131848.92 ],// Bratislava
    [ 5206501.17 , 2831931.44 ],// Riyadh
    [ 5736623.74 , 2910982.82 ],// Doha
    [ 8144655.88 , 3988849.96 ],// Islamabad
    [ 8276390.28 , 3705941.85 ],// Lahore
    [ 7457077.06 , 2860023.28 ],// Karachi
    [ 9497188.55 , 3213546.53 ],// Kathmandu
    [ 13519534.67 , 2878032.05 ],// Taipei
    [ 2051956.88 , -4017805.47 ],// Cape Town
    [ 2919900.54 , -3390927.44 ],// Bloemfontein
    [ 3142269.05 , -2962586.44 ],// Pretoria
    [ 3120069.79 , -3019915.64 ],// Johannesburg
    [ 3448462.38 , -3485960.51 ],// Durban
    [ 16385394.55 , -1058431.18 ],// Port Moresby
    [ 17805526.47 , -1055416.52 ],// Honiara
    [ 547101.26 , 6864007.95 ],// Amsterdam
    [ -8853793.80 , 1002635.82 ],// Panama City
    [ -848066.75 , 3975474.31 ],// Casablanca
    [ -761025.47 , 4032200.68 ],// Rabat
    [ 2144715.47 , 5231037.46 ],// Podgorica
    [ 3212425.70 , 5942894.09 ],// Chisinau
    [ 3627592.41 , -2993302.01 ],// Maputo
    [ 3374547.30 , 8386605.07 ],// St. Petersburg
    [ 4187124.23 , 7509620.82 ],// Moscow
    [ 5049978.83 , 230328.57 ],// Mogadishu
    [ 6522577.67 , 2706360.34 ],// Muscat
    [ 8899992.51 , 769968.29 ],// Sri Jawewardenepura Kotte
    [ 8889724.13 , 773552.35 ],// Colombo
    [ 14137328.77 , 4518618.59 ],// Seoul
    [ 13421784.61 , 1854572.21 ],// Baguio City
    [ 13467462.19 , 1643846.53 ],// Manila
    [ -11168899.42 , 2958505.83 ],// Monterrey
    [ -11502863.40 , 2352806.26 ],// Guadalajara
    [ -10931794.75 , 2161047.93 ],// Puebla
    [ -11035427.74 , 2207325.95 ],// Mexico City
    [ 377326.89 , 718995.18 ],// Lagos
    [ 948229.65 , 1345927.22 ],// Kano
    [ 2337492.64 , 6845809.44 ],// Warsaw
    [ 13998731.52 , 4724735.19 ],// Pyongyang
    [ 11901686.61 , 6093326.64 ],// Ulaanbaatar
    [ 19456785.09 , -5056688.94 ],// Wellington
    [ 1901731.65 , -2580100.31 ],// Windhoek
    [ 4371115.20 , -758539.14 ],// Dar es Salaam
    [ 3979672.19 , -689662.47 ],// Dodoma
    [ 19454532.06 , -4417950.41 ],// Auckland
    [ 831219.90 , 5928485.16 ],// Bern
    [ -1469417.93 , 3142222.58 ],// Laayoune
    [ 838389.62 , 1015633.74 ],// Abuja
    [ 10981455.63 , 398997.47 ],// Medan
    [ -695841.61 , 7045207.16 ],// Dublin
    [ -1736401.58 , 1330351.08 ],// Bissau
    [ -1202212.70 , 704363.36 ],// Monrovia
    [ 1585530.79 , 4989060.30 ],// Naples
    [ 1389413.35 , 5145697.82 ],// Rome
    [ 2356186.58 , 5261378.46 ],// Pristina
    [ 3999860.03 , 3757007.73 ],// Amman
    [ 1024480.29 , 5696124.30 ],// Milan
    [ 2818234.94 , 7300654.89 ],// Vilnius
    [ 2682795.87 , 7749910.82 ],// Riga
    [ 8302570.34 , 5292968.72 ],// Bishkek
    [ 11320973.73 , 352908.17 ],// Kuala Lumpur
    [ 11553856.00 , 4308601.40 ],// Lanzhou
    [ 12057915.56 , 2610498.73 ],// Nanning
    [ 11879803.74 , 3071343.14 ],// Guiyang
    [ 11865882.46 , 3448002.40 ],// Chongqing
    [ 12956068.08 , 4855896.94 ],// Beijing
    [ 13280203.75 , 3009233.33 ],// Fuzhou
    [ 12615065.80 , 2649796.68 ],// Guangzhou
    [ 12661787.94 , 2638167.40 ],// Dongguan
    [ 4098194.88 , -142656.78 ],// Nairobi
    [ 3059423.96 , -3416013.66 ],// Maseru
    [ 5289309.76 , -2144894.79 ],// Antananarivo
    [ 11974422.41 , -775359.80 ],// Bandung
    [ 11891981.98 , -688449.37 ],// Jakarta
    [ 12551148.73 , -808924.57 ],// Surabaya
    [ -8896874.98 , -246978.11 ],// Guayaquil
    [ -8738802.32 , -23715.81 ],// Quito
    [ -8413188.24 , 700148.71 ],// Medellin
    [ -9360410.39 , 1111764.63 ],// San Jose
    [ -9930253.73 , 1541189.59 ],// San Salvador
    [ -8545711.63 , 2034865.57 ],// Kingston
    [ -8247136.73 , 512438.55 ],// Bogota
    [ -8516153.92 , 378921.03 ],// Cali
    [ -9168955.43 , 2648220.19 ],// Havana
    [ -6833571.02 , 1723915.71 ],// Roseau
    [ 1675046.91 , 1358803.77 ],// Ndjamena
    [ 977749.98 , 417748.15 ],// Malabo
    [ 3478513.93 , 3510223.64 ],// Cairo
    [ 3333801.67 , 3659006.04 ],// Alexandria
    [ 4334037.74 , 1727646.48 ],// Asmara
    [ 4803213.57 , 1299652.65 ],// Djibouti
    [ 965698.29 , 6463608.10 ],// Frankfurt
    [ 1112978.20 , 7085757.38 ],// Hamburg
    [ 1781111.25 , 5748357.87 ],// Zagreb
    [ 1288305.76 , 6128824.39 ],// Munich
    [ 1610128.89 , 6461058.45 ],// Prague
    [ 1491636.95 , 6895388.53 ],// Berlin
    [ 2752712.90 , 8274761.29 ],// Tallinn
    [ 5340703.44 , 3423036.05 ],// Kuwait
    [ 9748588.42 , 5435616.93 ],// Urumqi
    [ 11321408.95 , 324527.13 ],// Putrajaya
    [ 12121918.92 , 4066053.41 ],// Xian
    [ 12528241.90 , 4562058.69 ],// Taiyuan
    [ 12720263.49 , 3578579.09 ],// Wuhan
    [ 12575545.48 , 3274454.68 ],// Changsha
    [ 11584804.96 , 3590217.95 ],// Chengdu
    [ 11430065.93 , 2884581.69 ],// Kunming
    [ 12652923.63 , 4130899.39 ],// Zhengzhou
    [ 13742171.57 , 5132101.49 ],// Shenyeng
    [ 13023609.29 , 4394169.90 ],// Jinan
    [ 13046429.83 , 4740593.11 ],// Tianjin
    [ 12899485.56 , 3335225.83 ],// Nanchang
    [ 13222309.64 , 3770133.77 ],// Nanjing
    [ 13518033.25 , 3661144.92 ],// Shanghai
    [ 13377048.67 , 3535973.06 ],// Hangzhou
    [ 14743261.01 , 4081260.94 ],// Hiroshima
    [ 13952566.95 , 5444876.10 ],// Changchun
    [ 12225114.71 , 4961462.38 ],// Baotou
    [ 14098395.21 , 5740684.52 ],// Harbin
    [ 15733685.14 , 5323687.97 ],// Sapporo
    [ 15111404.03 , 4168222.25 ],// Kyoto
    [ 15079137.73 , 4130227.23 ],// Osaka
    [ 15556838.90 , 4257632.98 ],// Tokyo
    [ 1704638.25 , -482224.83 ],// Kinshasa
    [ 3760739.97 , -1572300.10 ],// Lilongwe
    [ -10077632.32 , 1645799.44 ],// Guatemala
    [ -7781458.49 , 2092872.20 ],// Santo Domingo
    [ -1846979.76 , 1511634.60 ],// Banjul
    [ 1052855.85 , 42901.58 ],// Libreville
    [ -24341.29 , 619013.11 ],// Accra
    [ 8596988.11 , 3333957.08 ],// Delhi
    [ 8593862.46 , 3324835.75 ],// New Delhi
    [ 8736131.85 , 1967662.56 ],// Hyderabad
    [ 8633724.17 , 1456526.77 ],// Bangalore
    [ 8220728.18 , 2099908.92 ],// Pune
    [ 8804041.23 , 2412388.33 ],// Nagpur
    [ 8110186.33 , 2157165.47 ],// Mumbai
    [ 19864039.99 , -2053123.71 ],// Suva
    [ 259529.08 , 6252601.46 ],// Paris
    [ -7866835.61 , -3954929.63 ],// Santiago
    [ -7973031.37 , -3901387.19 ],// Valparaiso
    [ -1778366.76 , 2047667.15 ],// Nouakchott
    [ -890776.89 , 1419997.19 ],// Bamako
    [ 2641764.60 , 4577345.46 ],// Athens
    [ 2385962.01 , 5160980.36 ],// Skopje
    [ 1467192.19 , 3881043.81 ],// Tripoli
    [ 3952706.02 , 4011885.23 ],// Beirut
    [ 4985871.92 , 5120166.10 ],// Tbilisi
    [ 3870363.39 , 3774070.98 ],// Tel Aviv-Yafo
    [ 4941686.25 , 3940599.92 ],// Baghdad
    [ 4307848.17 , 1009994.88 ],// Addis Ababa
    [ 2775437.63 , 8439364.84 ],// Helsinki
    [ 7951303.45 , 6653395.44 ],// Astana
    [ 5724315.18 , 4255841.23 ],// Tehran
    [ 6631085.08 , 4338108.26 ],// Mashhad
    [ 8438912.57 , 3113864.78 ],// Jaipur
    [ 8940964.47 , 3056408.15 ],// Kanpur
    [ 9832041.30 , 2571291.35 ],// Kolkata
    [ 9476415.93 , 2952944.42 ],// Patna
    [ 8936511.96 , 1470237.42 ],// Chennai
    [ 8079352.43 , 2635888.80 ],// Ahmedabad
    [ 8108299.48 , 2415972.88 ],// Surat
    [ 11421377.53 , 2033650.35 ],// Vientiane
    [ 1701267.23 , -474350.45 ],// Brazzaville
    [ 1398344.22 , 7495075.37 ],// Kbenhavn
    [ -1523093.40 , 1066192.02 ],// Conakry
    [ -449952.72 , 593289.70 ],// Abidjan
    [ -587266.25 , 760816.57 ],// Yamoussoukro
    [ -5396988.08 , -161214.17 ],// Belem
    [ -5334207.15 , -1779420.78 ],// Brasilia
    [ -5699775.88 , -3509730.13 ],// Porto Alegre
    [ -5490493.63 , -2927182.76 ],// Curitiba
    [ -4294920.48 , -417531.36 ],// Fortaleza
    [ -4283789.21 , -1456079.55 ],// Salvador
    [ -4812003.91 , -2622718.78 ],// Rio de Janeiro
    [ 2278269.68 , 5593321.34 ],// Belgrade
    [ 12794314.65 , 544269.27 ],// Bandar Seri Begawan
    [ -7264656.04 , -2159760.16 ],// Sucre
    [ -5488270.25 , -1888032.58 ],// Goiania
    [ -6501000.06 , -4109729.89 ],// Buenos Aires
    [ -5190490.09 , -2699486.46 ],// Sao Paulo
    [ -3887004.03 , -901749.31 ],// Recife
    [ -9881505.36 , 1950183.06 ],// Belmopan
    [ 2065899.18 , 486563.86 ],// Bangui
    [ 1281811.08 , 430983.36 ],// Yaounde
    [ 2206227.96 , 5060774.54 ],// Tirana
    [ 482165.98 , 6592205.21 ],// Brussels
    [ 4955009.26 , 4892585.15 ],// Yerevan
    [ 5550420.01 , 4923833.91 ],// Baku
    [ 7701228.66 , 4098656.61 ],// Kabul
    [ 11679049.71 , 1294762.20 ],// Phnom Penh
    [ 10064020.41 , 2719934.46 ],// Dhaka
    [ 1473033.06 , -987579.59 ],// Luanda
    [ -7586638.26 , -1862237.69 ],// La Paz
    [ -6636481.39 , 1471388.22 ],// Bridgetown
    [ 291281.42 , 723263.98 ],// Porto-Novo
    [ 280307.45 , 714149.85 ],// Cotonou
    [ 339369.34 , 4406402.72 ],// Algiers
    [ 2595381.43 , 5264192.59 ],// Sofia
    [ 1821709.30 , 6140519.98 ],// Vienna
    [ 3068486.28 , 7151603.57 ],// Minsk
    [ 9978569.39 , 3182690.38 ],// Thimphu
    [ 10218909.01 , 2551425.31 ],// Chittagong
    [ 2884504.83 , -2832364.33 ],// Gaborone
    [ 16600967.26 , -4202410.42 ],// Canberra
    [ 16829640.61 , -4017805.47 ],// Sydney
    [ 16138328.37 , -4553759.16 ],// Melbourne
    [ -169948.08 , 1388103.78 ],// Ouagadougou
    [ 2046386.38 , 5442262.06 ],// Sarajevo
    [ 10699659.05 , 2245626.98 ],// Naypyidaw
    [ 10705008.97 , 1895846.94 ],// Rangoon
    [ 3268340.92 , -376041.97 ],// Bujumbura
    [ 17605174.61 , 771834.17 ],// Palikir
    [ 19077934.35 , 792735.99 ],// Majuro
    [ 19950305.89 , -951580.02 ],// Funafuti
    [ 1387783.38 , 5452629.90 ],// San Marino
    [ 14986558.82 , 835875.59 ],// Melekeok
    [ -1074513.85 , 3013847.74 ],// Bir Lehlou
    [ 824533.80 , 5425239.75 ],// Monaco
    [ 1059390.79 , 5963928.57 ],// Vaduz
    [ 19260227.88 , 148979.89 ],// Tarawa
    [ 4813481.95 , -1312057.96 ],// Moroni
    [ 168814.44 , 5236174.00 ],// Andorra
    [ -6814095.61 , 1476677.86 ],// Kingstown
    [ -6790489.84 , 1574442.96 ],// Castries
    [ -6981625.54 , 1956011.68 ],// Basseterre
    [ -19505464.01 , -2408402.39 ],// Nukualofa
    [ 4905327.87 , 1069189.47 ],// Hargeysa
    [ 11560960.46 , 144168.71 ],// Singapore
    [ 6172664.62 , -514478.08 ],// Victoria
    [ 749550.32 , 37114.36 ],// Sao Tome
    [ -19117858.13 , -1556043.66 ],// Apia
    [ 6400870.03 , -2292782.03 ],// Port Louis
    [ 1615770.19 , 4286833.47 ],// Valletta
    [ 8181976.72 , 464245.21 ],// Male
    [ 3919183.67 , 3734258.22 ],// Jerusalem
    [ -6873048.28 , 1351699.01 ],// Saint George's
    [ 12710800.48 , 2548415.56 ],// Hong Kong
    [ -2617865.83 , 1679601.75 ],// Praia
    [ 5630879.55 , 3028356.95 ],// Manama
    [ -8610567.48 , 2885990.70 ],// Nassau
    [ -6885114.26 , 1934569.52 ],// Saint John's
    [ 3714356.80 , 4186554.94 ],// Nicosia
  ];
  map = new ol.Map({
    layers: [
      new ol.layer.Tile({
        source: new ol.source.WMTS({
           attributions: [
            new ol.Attribution({
              html:'<a href="http://www.openstreetmap.org/">OpenStreetMap</a>'
            }),
            ol.source.OSM.DATA_ATTRIBUTION
          ],
          url: 'http://maps.boundlessgeo-dev.com/geoserver/gwc/service/wmts/',
          layer: 'osm:osm',
          matrixSet: 'EPSG:900913',
          format: 'image/png',
          projection: projection,
          tileGrid: new ol.tilegrid.WMTS({
            origin: ol.extent.getTopLeft(projectionExtent),
            resolutions: resolutions,
            matrixIds: matrixIds
          }),
          style: '_null',
          extent: [-20037508.34,-20037508.34,20037508.34,20037508.34]
        })
      })
    ],
    target: 'map',
    ol3Logo: false,
    view: new ol.View2D({
      center: centers[Math.round(Math.random()*centers.length)],
      zoom: 12
    })
  });
}
